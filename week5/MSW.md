# 학습 키워드

- Service worker
- MSW(Mock Service Worker)
- polyfill(폴리필)

## ✔️ 키워드 정리

### Service worker

서비스워커는 백그라운드에서 실행되는 스크립트를 의미한다.
웹브라우저가 실행되지 않은 상태에서도 웹브라우저가 웹페이지와 별개로 백그라운드에서 실행되는 스크립트이다. 캐시와 푸시 알림의 기능을 제공하여 앱을 사용하는 것처럼 웹 앱을 사용할 수 있게 해준다.

서비스워커는 웹 워커의 일종이다.
서비스워커와 웹 워커는 유사한 인터페이스를 갖고 있지만 별도의 워커 스레드에서 동작하며 직접적인 DOM 접근이나 조작이 불가능하다.

웹워커를 통해서 복잡한 작업들은 메인 스레드가 아니라 별도의 워커스레드를 통해 계산되도록 구현하는 방법으로 메인 스레드의 부담을 줄이고 성능이 하락되는 것을 방지할 수 있다. 서비스 워커는 여러 탭에서 사용할 수 있고 모든 탭이 닫히더라도 계속 활성화되어 있지만 웹 워커는 하나의 탭으로 작동이 제한된다.

서비스워커는 브라우저에서 작동하는 스크립트이며 사용자의 요청을 저장하는 구조를 갖고있다.

사용자가 탭을 닫아도 서비스워커는 계속 지속되는 구조이며, 만약 다음 사용자가 다시 웹에 접근하였을 경우 서비스워커는 다시 작동하게 된다.

서비스워커는 애플리케이션과 통신할 때 가장 먼저 이전 캐시의 기록을 참고하여 처리하고, 캐시 기록으로 처리할 수 없을 때 네트워크를 통해 서버에 요청하여 처리하게 된다.

만약 캐시 기록이 남아 있는 상태인 경우엔 독립적으로 전체 애플리케이션을 로딩할 수 있고 서버에 대한 의존도를 줄이는 방식으로 로딩 속도를 더 빠르게 만들어서 사용자의 경험을 개선시켜주는데 큰 도움을 준다.

서비스 워커는 웹 사이트 UI/UX 개선에 큰 도움을 주는 개념이다.

### MSW(Mock Service)

MSW는 서비스 워커를 사용하여 네트워크 호출을 가로채는 모킹 라이브러리이다.

브라우저 환경에서 MSW는 Request handler에 정의된 Fetch 이벤트를 서비스워커에 등록하게 된다. 서비스 워커는 서버로의 요청이 발생하면 method, URL 등에 기반하여 요청을 가로채 MSW에 전달하고 handler에 정의된 모의 응답을 받는다.

서비스 워커는 브라우저 환경에서만 동작하기 때문에 MSW는 네이티브 http, https, XML Http Request 모듈을 확장하여 노드 환경을 지원한다. 동일한 Request handler를 재사용하기 때문에 모듈을 확장하여 노드환경을 지원한다.

client-side에서 MSW를 사용하기 위해서는 Service Worker를 등록해야한다.

[MSW 설치하기](https://mswjs.io/docs/getting-started#step-1-install)

MSW CLI로 Service worker를 등록할 수 있다.

```Bash
npx msw init public/ — save
```

### polyfill(폴리필)

폴리필이란 브라우저가 지원하지 않는 자바스크립트 코드를 지원 가능하도록 변환한 코드를 뜻한다.

폴리필을 위한 트랜스파일러에는 Babel이 있다.
Babel 내부에 core-js라는 라이브러리가 내장되어 있어서 ES6이후의 문법들을 폴리필 처리할 수 있다.

## 참고

<https://www.ktpdigitallife.com/%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9B%8C%EC%BB%A4-%EB%9C%BB%EA%B3%BC-%EA%B0%9C%EB%85%90/#google_vignette><br/>
<https://blog.mathpresso.com/msw%EB%A1%9C-api-%EB%AA%A8%ED%82%B9%ED%95%98%EA%B8%B0-2d8a803c3d5c><br/>
